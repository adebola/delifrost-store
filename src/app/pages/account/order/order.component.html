<app-breadcrumb [title]="'Order History'" [breadcrumb]="'Orders'"></app-breadcrumb>

<!-- <section class="cart-section section-b-space"> -->
<section>
  <div class="container">
    <div class="card shopping-cart">
      <div class="card-body">
        <div class="col-sm-12 empty-cart-cls text-center" *ngIf="!(orders$ | async)">
          <img src="assets/images/icon-empty-cart.png" class="img-fluid mb-4" />
          <h3><strong>Your have no Order History</strong></h3>
          <h4>Please make purchases</h4>
        </div>

        <table class="table cart-table table-responsive-xs" *ngIf="orders$ | async as orders">
          <thead>
            <tr class="table-head">
              <th scope="col">Id</th>
              <th scope="col">Date</th>
              <th scope="col">Amount</th>
              <th scope="col">Pickup</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let order of orders">
              <td>
                <a (click)="loadOrderDetail(order.id)" style="cursor: pointer;">
                  {{ order.id }}
                </a>
              </td>
              <td>
                <a (click)="loadOrderDetail(order.id)" style="cursor: pointer;">{{
                  order.orderedAt | date
                }}</a>
              </td>
              <td>
                {{ order.orderAmount | currency: "₦":"symbol":"1.0-0" }}
              </td>
              <td>
                {{ order.pickup ? "Y" : "N" }}
              </td>
            </tr>
          </tbody>
        </table>

        <div class="container" *ngIf="(orderItems$ | async) as orderItems">
          <h4 class="align-middle">Order Items for Order {{orderItems[0].order_id}}</h4>
          <table class="table cart-table table-responsive-xs">
            <thead>
              <tr class="table-head">
                <th scope="col">Image</th>
                <th scope="col">Name</th>
                <th scope="col">Qty</th>
                <th scope="col">Price</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of orderItems$ | async">
                <td>
                  <img [src]="item.image_path" alt="fashion" style="max-width: 100px;">
                </td>
                <td>
                  {{ item.product_name}}
                </td>
                <td>
                    {{ item.quantity}}
                </td>
                <td>
                  {{item.total_price | currency: "₦":"symbol":"1.0-0" }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</section>